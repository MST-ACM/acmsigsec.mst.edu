<!DOCTYPE html>
<html>
<head>
	<!-- meta and script-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta content="noindex, nofollow" name="robots">
	<!-- Including JS Files Here -->
	<script src="https://js.stripe.com/v3/"></script>

    <title>ACM SIG-Security</title>
		<a href="https://acmsigsec.mst.edu/index.html" class="w3-center w3-padding w3-margin"><img src="../../header-logo-wide.png" style="width:90%;height:20%;padding:15px;"></a>

		<!-- Link Stylesheet -->
		<link rel="stylesheet" href="https://acmsigsec.mst.edu/w3schools.css">
		<link rel="stylesheet" type="text/css" href="pay-form-style.css">
		<link rel="stylesheet" type="text/css" href="../../styles.css">

    <!-- Nav bar -->
		<div id="nav">
			<ul>
				<li><a href="https://acmsigsec.mst.edu/cdt.php" class="menu">Cyber Defense Team</a></li>
				<li><a href="https://acmsigsec.mst.edu/talks.html" class="menu">Talks & Events</a></li>
				<li><a href="https://acmsigsec.mst.edu/learn.html" class="menu">Learn Security</a></li>
        <li><a href="https://acmsigsec.mst.edu/wire-shop.html" class="menu">Wireless Workshop</a></li>
        <li><a href="https://acmsigsec.mst.edu/bootcamp.html" class="menu">Cyber Boot Camp</a></li>
        <li><a href="https://acmsigsec.mst.edu/education.html" class="menu">S&T Education</a></li>
        <li><a href="https://acm.mst.edu/" class="menu">ACM General</a></li>
				<li><a href="https://acmsigsec.mst.edu/archives.html" class="menu">Archives</a></li>
				<li><a href="https://acmsigsec.mst.edu/join.html" class="menu">Join SIG-Sec</a></li>
				<li><a href="https://acmsigsec.mst.edu/contact.html" class="menu">Officers</a></li>
			</ul>
		</div>
</head>

<body>
  <div class="mainbody">
    <div class="middle1">
      <!-- Input boxes to take user data and send it to google spreadsheets -->
      <h2>Application for Cyber Boot Camp</h2>
      <div class="styleLine"></div>
        <form method="post" id="payment-form" action="/register/charge2">
          <label>Name</label>
            <input id='names' name='name' type='text' placeholder="Joe Miner">
          </p><p>
            <label>Email Address</label>
            <input id='emails' name='email' type='email' placeholder="youremail@here.com">
          </p><p>
            <label>Major</label>
            <input id='major' name='major' type='text' placeholder="Computer Science">
          </p><p>
            <label>Have you ever attended a Cyber Boot Camp?</label>
            <input id='attend' name='attend' type='text' placeholder="yes/no">
          </p><br />
          <!-- Display the Card element, uses Elements from Stripe -->
          <div class="price">
            <table>
              <tr>
                <th><h4>Membership</h4></th>
                <th><h4>Price</h4></th>
              </tr>
              <tr>
                <td>Normal Application Price (Hotel, Transportation, NOT food): </td>
                <td>$250.00</td>
              </tr>
              <tr>
                <th><h4>20 people will be selected</h4></th>
              </tr>
              <tr>
                <td>If you are not chosen you will be refunded.</td>
              </tr>
            </table>
          </div><br />
          <div class="form-row">
            <label for="card-element">
              Credit or debit card
              <img src="credit-cards4.png" alt="mastercard, visa, discover" style="float: right;"><br />
              <img src="powered_by_stripe.png" alt="powered by stripe" style="float: right;"><br />
            </label><br /><br />
            <div id="card-element">
              <!-- a Stripe Element will be inserted here. -->
            </div>

            <!-- Used to display form errors -->
            <div id="card-errors"></div>
            </div><br />
              <input type="submit" class="submit" value="Submit Payment">
          </form>
	    </div>
    </div><br /><br /><br />
      <!-- Used to display some in page stuff, look closer at this later -->
	    <script>
		    function myFunction(id) {
          var x = document.getElementById(id);
          if (x.className.indexOf("w3-show") == -1) {
              x.className += " w3-show";
          } else {
              x.className = x.className.replace(" w3-show", "");
          }
        }
	    </script>
      <!-- Client Side Javascript to tokenize the card data and send it to the Server.js
      which then it will be sent to stripe servers to charge the card. The info doesn't 
      touch our own server.' -->
      <script>
        var stripe = Stripe("pk_live_rXRE81suFTuEjgWFo76GVW0p");
        var elements = stripe.elements();

        //Style the card button
        var card = elements.create('card', {
          'style': {
            'base': {
              'fontFamily': 'Arial, sans-serif',
              'fontSize': '15px',
              'color': '#C1C7CD',
            },
            'invalid': {
              'color': 'red',
            },
          }
        });

        // Add an instance of the card UI component into the `card-element` 
        card.mount('#card-element');

        card.addEventListener('change', function(event) {
          var displayError = document.getElementById('card-errors');
          if (event.error) {
            displayError.textContent = event.error.message;
          } else {
            displayError.textContent = '';
          }
        });

        function stripeTokenHandler(token) {
          // Insert the token ID into the form so it gets submitted to the server
          var form = document.getElementById('payment-form');
          var hiddenInput = document.createElement('input');
          hiddenInput.setAttribute('type', 'hidden');
          hiddenInput.setAttribute('name', 'stripeToken');
          hiddenInput.setAttribute('value', token.id);
          form.appendChild(hiddenInput);

          // Submit the form
          form.submit();
        };

          function createToken() {
            stripe.createToken(card).then(function(result) {
              if (result.error) {
                // Inform the user if there was an error
                var errorElement = document.getElementById('card-errors');
                errorElement.textContent = result.error.message;
              } else {
                // Send the token to your server
                stripeTokenHandler(result.token);
              }
            });
          };

          // Create a token when the form is submitted.
          var form = document.getElementById('payment-form');
          form.addEventListener('submit', function(e) {
            e.preventDefault();
            createToken();
          });
  </script>
</body>
</html>
